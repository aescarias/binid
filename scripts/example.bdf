// This is an example of a BinDef file for testing. In this case, it defines the 
// header of a Paint.NET image file (.pdn). The structure defined here is NOT final.

{
  meta: {
    bdf: "0.1",
    name: "Paint.NET image file",
    mime: ["image/x-paintnet"],
  	exts: [".pdn"],
  },
  decl: [
    { id: document, 		
      value: lib.xml.parse(binary.header) }, 
    { id: width,	        
      value: decl.document["pdnImage"]["@width"] },
    { id: height,   		
      value: decl.document["pdnImage"]["@height"] },
    { id: layers,   		
      value: decl.document["pdnImage"]["@layers"] },
    { id: savedWithVersion, 
      value: decl.document["pdnImage"]["@savedWithVersion"] },
  ],
  binary: [
    { type: magic, match: "PDN3" },
    { type: uint32, 
      id: headerSize,
      from: {
        value: file.read(3) + "\x00",
        endian: "little"
      }
    },
    { type: byte[binary.headerSize],
      id: header 
	  }
  ]
}
